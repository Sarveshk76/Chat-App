{% extends "base.html" %}
{% load static %}
{% block content %}

<!-- Start chats tab-pane -->
<div class="tab-pane fade show active" id="pills-chat" role="tabpanel" aria-labelledby="pills-chat-tab">
    <!-- Start chats content -->
    <div>
        <div class="px-4 pt-4">
            <h4 class="mb-4">Chats</h4>
            <div class="search-box chat-search-box">            
                <div class="input-group mb-3 rounded-3">
                    <span class="input-group-text text-muted bg-light pe-1 ps-3" id="basic-addon1">
                        <i class="ri-search-line search-icon font-size-18"></i>
                    </span>
                    <input type="text" class="form-control bg-light" placeholder="Search messages or users" aria-label="Search messages or users" aria-describedby="basic-addon1">
                </div> 
            </div> <!-- Search Box-->
        </div> <!-- .p-4 -->

        <!-- Start user status -->
        <div class="px-4 pb-4" dir="ltr">

            <div class="owl-carousel owl-theme" id="user-status-carousel">
                <div class="item">
                    <a href="#" class="user-status-box">
                        <div class="avatar-xs mx-auto d-block chat-user-img online">
                            <img src="{% static 'assets/images/users/avatar-2.jpg' %}" alt="user-img" class="img-fluid rounded-circle">
                            <span class="user-status"></span>
                        </div>

                        <h5 class="font-size-13 text-truncate mt-3 mb-1">Patrick</h5>
                    </a>
                </div>
                
                {% for i in all_users %}
                <div class="item">
                    <a href="{% url 'chatpage' username=i.first_name %}" class="user-status-box">
                        <div class="avatar-xs mx-auto d-block chat-user-img online">
                            <img src="{% static 'assets/images/users/avatar-2.jpg' %}" alt="user-img" class="img-fluid rounded-circle">
                            {% if i.is_online %}<span class="user-status"></span>{% endif %}
                        </div>

                        <h5 class="font-size-13 text-truncate mt-3 mb-1">{{i.first_name}}</h5>
                    </a>
                </div>
                {% endfor %}
                
            </div>
            <!-- end user status carousel -->
        </div>
        <!-- end user status -->

        <!-- Start chat-message-list -->
        <div>
            <h5 class="mb-3 px-3 font-size-16">Recent</h5>

            <div class="chat-message-list px-2" data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px -8px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: -16.6667px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: 100%; overflow: hidden scroll;"><div class="simplebar-content" style="padding: 0px 8px;">

                <ul class="list-unstyled chat-list chat-user-list">
                    
                    <li class="active">
                        <a href="#">
                            <div class="d-flex">
                                <div class="chat-user-img online align-self-center me-3 ms-0">
                                    <img src="{% static 'assets/images/users/avatar-4.jpg' %}" class="rounded-circle avatar-xs" alt="">
                                    <span class="user-status"></span>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">Doris Brown</h5>
                                    <p class="chat-user-message text-truncate mb-0">Nice to meet you</p>
                                </div>    
                                <div class="font-size-11">10:12 AM</div>
                            </div>
                        </a>
                    </li>
                    <li class="unread">
                        <a href="#">
                            <div class="d-flex">
                                <div class="chat-user-img align-self-center me-3 ms-0">
                                    <div class="avatar-xs">
                                        <span class="avatar-title rounded-circle bg-soft-primary text-primary">
                                            D
                                        </span>
                                    </div>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">Designer</h5>
                                    <p class="chat-user-message text-truncate mb-0">Next meeting tomorrow 10.00AM</p>
                                </div>
                                <div class="font-size-11">12:01 PM</div>
                                <div class="unread-message">
                                    <span class="badge badge-soft-danger rounded-pill">01</span>
                                </div>
                            </div>                            
                        </a>
                    </li>
                    <li>
                        <a href="#">                        
                            <div class="d-flex">
                                <div class="chat-user-img away align-self-center me-3 ms-0">
                                    <img src="{% static 'assets/images/users/avatar-6.jpg' %}" class="rounded-circle avatar-xs" alt="">
                                    <span class="user-status"></span>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">Steve Walker</h5>
                                    <p class="chat-user-message text-truncate mb-0"><i class="ri-file-text-fill align-middle me-1 ms-0"></i> Admin-A.zip</p>
                                </div>        
                                <div class="font-size-11">03:20 PM</div>
                            </div>                        
                        </a>
                    </li>
                    <li class="typing">
                        <a href="#">                        
                            <div class="d-flex">
                                <div class="chat-user-img align-self-center online me-3 ms-0">
                                    <div class="avatar-xs">
                                        <span class="avatar-title rounded-circle bg-soft-primary text-primary">
                                            A
                                        </span>
                                    </div>
                                    <span class="user-status"></span>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">Albert Rodarte</h5>
                                    <p class="chat-user-message text-truncate mb-0">typing<span class="animate-typing">
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                    </span></p>
                                </div>
                                <div class="font-size-11">04:56 PM</div>
                            </div>  
                        </a>
                    </li>

                    <li>
                        <a href="#">
                            <div class="d-flex">
                                <div class="chat-user-img align-self-center online me-3 ms-0">
                                    <div class="avatar-xs">
                                        <span class="avatar-title rounded-circle bg-soft-primary text-primary">
                                            M
                                        </span>
                                    </div>
                                    <span class="user-status"></span>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">Mirta George</h5>
                                    <p class="chat-user-message text-truncate mb-0">Yeah everything is fine</p>
                                </div>           
                                <div class="font-size-11">12/07</div>
                            </div>
                        </a>
                    </li>

                    <hr class="hr" />

                    {% for i in recent_users %}
                    <li>
                        <a href="#">
                            <div class="d-flex">
                                <div class="chat-user-img align-self-center online me-3 ms-0">
                                    <div class="avatar-xs">
                                        <span class="avatar-title rounded-circle bg-soft-primary text-primary">
                                            {{i.first_name|first}}
                                        </span>
                                    </div>
                                    <span class="user-status"></span>
                                </div>
                                <div class="flex-grow-1 overflow-hidden">
                                    <h5 class="text-truncate font-size-15 mb-1">{{i.full_name}}</h5>
                                    <p id="recent_msg" class="chat-user-message text-truncate mb-0">Yeah everything is fine</p>
                                </div>           
                                <div class="font-size-11">12/07</div>
                            </div>
                        </a>
                    </li>
                    {% endfor %}

                </ul>
            </div></div></div></div><div class="simplebar-placeholder" style="width: auto; height: 890px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="transform: translate3d(0px, 0px, 0px); display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar" style="height: 88px; transform: translate3d(0px, 0px, 0px); display: block;"></div></div></div>
        </div>
        <!-- End chat-message-list -->
    </div>
    <!-- Start chats content -->
</div>
<!-- End chats tab-pane -->


{% endblock %}